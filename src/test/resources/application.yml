spring:
  profiles:
    active: test
  # =================== 测试环境 JPA 数据源配置 (使用H2内存数据库) ===================
  datasource:
    url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    username: sa
    password:
    driver-class-name: org.h2.Driver
  jpa:
    hibernate:
      ddl-auto: create-drop # 每次测试运行时，创建表结构，测试结束后销毁，保证测试隔离性
    show-sql: true
  # ==============================================================================
  # Deactivate Redis auto-configuration for tests, as we are not using it anymore
  data:
    redis:
      repositories:
        enabled: false

# 外部服务地址配置 - 测试环境
services:
  promotion:
    url: http://localhost:8087
  product:
    url: http://localhost:8081

# =================== Seata 配置 - 测试环境 (禁用Seata) ===================
seata:
  # 在测试环境中禁用Seata
  enabled: false
  # 如果需要在测试中使用Seata，可以配置以下参数
  # application-id: cart-service-test
  # tx-service-group: default_tx_group
  # service:
  #   vgroup-mapping:
  #     default_tx_group: default
  #   grouplist:
  #     default: localhost:8091
# ========================================================